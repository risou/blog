<!DOCTYPE html>
<html>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-29519043-1"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
         gtag('config', 'UA-29519043-1');
        </script>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:title" content="risou's Lithograph" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://blog.risouf.net" />
        <meta property="og:image" content="https://blog.risouf.net/static/img/sunglass.jpeg" />
        <meta property="og:site_name" content="risou's Lithograph" />
        <meta property="og:description" content="risou's mini blog - writing about software engineering, thinking, private events" /><meta property="fb:app_id" content="2945406965474658" /><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@risou" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
        <link rel="stylesheet" href="/static/main.css">
        <title>risou's Lithograph</title>
    </head>
    <body>
        <section class="hero is-medium is-bold is-dark">
            <div class="hero-body">
                <div class="container has-text-centered">
                    <h1 class="title is-1">risou's Lithograph</h1>
                </div>
            </div>
        </section>
        <section class="section">
            <div class="container">
                <nav class="level is-mobile">
                    <div class="level-left"></div>
                    <div class="level-right">
                        <p class="level-item">top</p>
                        <p class="level-item"><a href="/list.html">list</a></p>
                    </div>
                </nav>
                <article class="articles">
                    
                    <div class="article">
                        <h1 class="title is-2"><a href="/entry/2025-02-04-visualize-active-window-floating-status-in-yabai.html">yabai の制御化でアクティブウィンドウが floating かどうかを可視化する</a></h1>
                        <div class="subtitle published">2025-02-04</div>
                        <div class="content">
                            <p>ここ数年、ウィンドウマネージャとして yabai というツールを使っている。<br/>
yabai が本領を発揮するためには System Integrity Protection を無効にする必要があるけれど、プライベートの環境も仕事の環境もなるべく同じに揃えておきたい気持ちがあり、会社から貸与されている Macbook の SIP を無効化しようとは全く思わないため、 SIP を無効化せずに使っている。<br/>
ところが MacOS Sequoia にアップデートして以降、少なくとも SIP が有効な環境ではウィンドウを別のスペースに移動させることができなくなった。</p>

<p>これまではスペースを大量に使って、スペースごとに最大でもウィンドウは2つ、といった運用をしてきたけれど、先の問題と作業環境のディスプレイの配置を変えたことが重なって、ウィンドウの管理方法が変わってきた。</p>

<p>最近は同時に使うスペースの数を少し減らして、代わりに1つのスペースに3つ以上のウィンドウがある状態で yabai の zoom-fullscreen を多用している。<br/>
また 4K 以上の解像度があると、3つ以上あるウィンドウの中から任意の2つを左右に分割したり、 2x2 の4分割にしたりという運用をすることもある。</p>

<p>zoom-fullscreen は yabai 上で managed (= not floating) なままで使うことができるが、2分割や4分割で使うためには floating にする必要がある。すなわち yabai において managed=off にする必要がある。<br/>
（本来的には、そのスペースにウィンドウが2つしかない状態にすることで yabai が勝手に左右に分割してくれる、という状態が望ましいし、4分割においても概ね同様のことが言える）</p>

<p>で floating の ON/OFF を頻繁に切り替えると、ウィンドウのフォーカスを切り替えるときなど、ふとしたときに期待する操作が行えない、ということが発生する。これは floating なウィンドウは yabai に manage されていないことに起因しており、アクティブウィンドウが floating なときに <code>yabai -m window --focus east</code> などが使えないため、他のウィンドウの選択が少々面倒になる。</p>

<p>ということでアクティブウィンドウが floating かどうかをいつでもわかるようにしたい、という動機で yabai, skhd, JankyBorders の設定を色々いじってみた。</p>

<p>具体的には、アクティブウィンドウがどれかをわかりやすくする JankyBorders の色情報を切り替えている。 yabai managed なウィンドウであれば緑に、そうでなければ黄色になるように設定した。</p>

<p>そのウィンドウが floating であるかどうかを判定したいタイミングは、大きくわけて以下の2種類になる。</p>

<ul>
<li>アクティブウィンドウの floating ON/OFF を切り替えたとき</li>
<li>ウィンドウのフォーカスを切り替えたとき</li>
</ul>


<p>前者については、該当するショートカットを実行したときに borders コマンドを叩くようにしている。<br/>
floating の切り替えを行う際はいつも、 toggle floating のショートカットを入力するか、上記の2分割、4分割の状態にするショートカットを入力するため、それらのコマンドに borders コマンドを組み合わせているだけだ。<br/>
一例を示すと、以下のような感じ。</p>

<pre><code class="sh">alt + shift - f : yabai -m window --toggle float; [ "$(yabai -m query --windows --window | jq -r '.["is-floating"]')" = "false" ] &amp;&amp; { borders active_color=0xc000ff80; :; } || borders active_color=0xc0ffff00
</code></pre>

<p><a href="https://github.com/risou/config/blob/8b2f46f7dc3b93118e95690e3e1382ced7d9ba3e/.skhdrc#L61">https://github.com/risou/config/blob/8b2f46f7dc3b93118e95690e3e1382ced7d9ba3e/.skhdrc#L61</a></p>

<p>もう1つのケースがフォーカスを切り替えたときで、この場合は yabai の signal で borders コマンドを発火している。</p>

<pre><code class="sh">yabai -m signal --add event=window_focused action='[ "$(yabai -m query --windows --window | jq -r ".[\"is-floating\"]")" = "false" ] &amp;&amp; { borders active_color=0xc000ff80; :; } || borders active_color=0xc0ffff00'
</code></pre>

<p><a href="https://github.com/risou/config/blob/8b2f46f7dc3b93118e95690e3e1382ced7d9ba3e/.yabairc#L95">https://github.com/risou/config/blob/8b2f46f7dc3b93118e95690e3e1382ced7d9ba3e/.yabairc#L95</a></p>

<p>これで、常に現在アクティブなウィンドウが floating かどうかが目に見えるようになった。</p>

<p>とはいえ、せっかくタイル型のウィンドウマネージャを用いているのに floating を多用するのはもったいないように感じている。</p>

<p>現代においては AeroSpace という非常に魅力的な選択肢もあり、時間に余裕ができたら試してみようか、という気持ちは少しある。<br/>
思想としては AeroSpace よりも yabai の方が好みなので、可能であればこのまま yabai を使い続けたいが、さて。</p>
                        </div>
                    </div>
                
                    <div class="article">
                        <h1 class="title is-2"><a href="/entry/2024-05-20-replace-ubersicht-with-sketchybar.html">Übersicht に SketchyBar に置き換えた</a></h1>
                        <div class="subtitle published">2024-05-20</div>
                        <div class="content">
                            <p>以前は <a href="https://tracesof.net/uebersicht/">Übersicht</a> で <a href="https://www.jeantinland.com/toolbox/simple-bar/">simple-bar</a> というウィジェットツールを使っていた。</p>

<p>このウィジェットを使っていた主な目的としては、 <a href="https://github.com/koekeishiya/yabai">yabai</a> というウィンドウマネージャを使っている中で、どのデスクトップにどのアプリケーションを置いているかなどが可視化されていると嬉しいというのが最も大きい。<br/>
このウィジェットツールは Mac の標準のメニューバーを代替することを想定しているものなので、日時に表示はもちろん、個人的には Spotify のステータス表示および再生・停止を行うウィジェットを便利に使ったり、自分でカスタマイズして <a href="https://meetingbar.app/">MeetingBar</a> の表示および次のミーティングへの参加ができるウィジェットを用意して、普段は OS が用意しているメニューバーを必要としない状態にしていた。</p>

<p>が、いくつか問題があって代替を探していた。</p>

<p>主な問題は何かというと、</p>

<ul>
<li>時折、負荷がかかっていそうな気配を感じさせる

<ul>
<li>CPU 使用率が跳ねたり、ファンが全力で稼働している音がしていた</li>
</ul>
</li>
<li>ローディング状態が続く

<ul>
<li>各ウィジェットが shell を定期実行してその結果を表示、という挙動をしているのだが、細かく大量にコマンドを実行しているためか、おそらく待ち行列が発生してローディング状態になって何も情報が得られない、という状態に結構なっていた</li>
</ul>
</li>
</ul>


<p>あたりで、特に後者はメニューバーの代替としての価値をほとんど失ってしまっているので時間を見つけて解消したいと思っていた。</p>

<p>simple-bar の代わりになりそうなものを探して、以下の２つのどちらかをためそうと考えた。</p>

<ul>
<li><a href="https://github.com/Jean-Tinland/simple-bar-lite">simple-bar-lite</a></li>
<li><a href="https://felixkratz.github.io/SketchyBar/">SketchyBar</a></li>
</ul>


<p>前者は simple-bar の軽量版ということで、導入コストが低そうなのが魅力だった。<br/>
が、問題の根本がもし Übersicht なのであれば、 simple-bar-lite を導入しても問題が解消しない可能性があった。</p>

<p>ということで、 SketchyBar を試すことにした。</p>

<p>実は SketchyBar の導入は Übersicht を導入したときにも検討をしていた。のだけど、調べてみたところ結構導入が大変そうだったので、一度見送ったという背景があった。</p>

<p>とはいえ、今回はもう腹をくくってこれを導入しよう、ということで、 <a href="https://github.com/FelixKratz/SketchyBar/discussions/47?sort=top">Share your setups · FelixKratz/SketchyBar · Discussion #47 · GitHub</a> から様々なセットアップを探して、ひとまずこれにしよう、というものを決めてそれを元に自分用にカスタマイズをした。</p>

<p>まずは、各デスクトップで開いているアプリケーションの表示部分をカスタマイズ。 4K などのモニタを使っているときは良いが、 FullHD のモニタではデスクトップ数が多いと横幅を広く取りすぎるので、アプリケーションがないデスクトップの表示をコンパクトにして、代わりに今アクティブなデスクトップのアプリケーションアイコンを省略しないようにした。</p>

<p>Spotify の表示についても参考にしたものでかなり整っていたが、再生・停止等の操作はポップアップメニュー経由で行う前提になっていたのと、再生していないときには表示領域に何もでなくなってしまうので、アイコンを常時表示にして、アイコンをクリックするだけで再生と停止を行えるようにした。</p>

<p>MeetingBar については自分で実装してワンクリックで次のミーティングのページを開けるようにした。これについては simple-bar 用に自分で用意したスクリプトをそのまま流用できたのでそんなに大変じゃなかった。</p>

<p>SketchyBar を導入して Übersicht を使っていたときの問題は解消したかというと、今のところ解消していそうな気配を感じている。<br/>
ファンが唸ることはなくなったし、ローディング状態にもならない。<br/>
さらに、 Übersicht から SketchyBar に置き換えたことが直接的な要因かは定かではないが、バッテリーの持ちが大幅に改善した。最近、長時間のオフラインミーティングなどで、途中でバッテリーが尽きてしまう問題を抱えていたが、かなり持つようになったことでこの問題が解決したことは副次的効果としては非常に嬉しかった。</p>

<p>これは Übersicht も同様だが、導入に際してどういう仕組みであるかを理解するまでのコストが高い。一方で、仕組みを理解してしまえばカスタマイズは容易といえる。<br/>
ということで、自分のやりたいことができるようになってきたところなので、時間に余裕ができたらもう少しカスタマイズしたいな、と思っている。<br/>
とはいえ、どんなカスタマイズをすると便利かの鮮明なイメージはまだ持っていないので、使いながら色々と考えてみようと思う。</p>
                        </div>
                    </div>
                
                    <div class="article">
                        <h1 class="title is-2"><a href="/entry/2024-02-16-yapc-hiroshima-2024.html">久しぶりに YAPC 参加したので軽く記録しておく</a></h1>
                        <div class="subtitle published">2024-02-16</div>
                        <div class="content">
                            <h2>参加するまで</h2>

<p>僕の中では YAPC は Perl のカンファレンスではあるので、「最近 Perl 書いてないしな」というのと「勤め先では Perl を使ってないからスポンサーにはならないだろうし、そうすると宿泊費も交通費も自腹だろうから、まとまったお金を捻出できるかわからないしな」などと考えて迷ってはいた。<br/>
まあ結局、「行かないで後悔するよりは、行って後悔した方がいいな」と判断してお金をかき集めて行くことにしたのだけど。</p>

<p>宿は早めに取っておこうと1ヶ月前に確保。<br/>
移動は新幹線で、いい席へのこだわりとかあったわけでもないので1週間ちょっと前に予約。<br/>
ただ今回は普段と比較して新幹線に乗っている時間が思った以上に長かったので、快適な席をとった方が良かったな、と思う。とはいえ行きは快適だったし、帰りに快適でなかったのは隣の席の人のいびきが酷いことに起因しているので、いい席を確保するとかそういう話ではないが……。</p>

<h2>準備</h2>

<p>流行り病の影響でこの手のイベントが開催されなくなっていた時期、仕事も在宅が中心になったりと環境の変化が大きかったため、手元にいろんなものがない状況だった。</p>

<p>このイベントのためというわけではないけど、実は天候に左右されずに履ける靴がなかった。<br/>
持っていたのは全く防水性のないウォーキングシューズと、完全にフォーマル向けの革靴のみ。<br/>
ここ数年、梅雨の時期なども引きこもることによってしのいできたが、出社の頻度も徐々に増えてきており、このままではまずいということで昨年末頃に雨や雪の日も履ける靴を一足調達した。<br/>
当日の天候がどうなるかわからなかったので念のためこの靴を使用し、広島にいる間は雨に見舞われることもなく順調だったが、帰りに駅から自宅までの移動のタイミングで雨が降っていたので結果的にこの靴を用意しておいてよかったと言える。</p>

<p>鞄も別件で昨年末頃に新調しており、今回の2泊3日もこれに助けられた。<br/>
以前使っていた鞄は PC と着替え両方を詰め込むにはスペースが足りず、1つにまとめられずにいたが、新調した鞄は2泊3日分くらいであれば余裕を持って受け入れられる大きさだったため、宿泊を伴う旅行としてはとても久しぶりとなる鞄1つでの参加ができた。</p>

<p>在宅勤務が中心となったタイミングで携帯電話周りを見直しており、現在は iPhone 12 mini を使っている。<br/>
もう3年以上使っているということもあるが、やはり小さい端末はバッテリーも小さく、今回は特にバッテリーが全く持たなくて困った。<br/>
イベント当日は PC も iPhone も夕方頃には完全にバッテリーが尽きてしまっており、これは準備不足だったと言わざるを得ない。<br/>
会場での給電は基本的に NG だと考えている（運営が OK 出した場合を除く）ので、これについては自分で解決策を用意しておくべきだった。<br/>
普段あまりにも出かけないのでモバイルバッテリーを用意することを完全に失念していた。</p>

<p>また、回線契約も同じタイミングで見直しており、普段は Wi-Fi で事足りるため提供されるデータ通信量の少ないプランに乗り換えていた。<br/>
この手のプランは非常に安く助かっているが、用意されているデータ量を超えるとただちにそれなりの金額が加算されてしまうため、外出が多い月などはデータの残量を気にする必要がある。<br/>
これに対しては、少し前に別件でモバイルでのデータ通信が必要な機会があり、その際に加入した povo に助けられた。<br/>
povo は「テザリング可能」で「24時間使い放題」が330円という、普段全く使わないがある1日だけめちゃくちゃ使うというユースケースに対して非常に刺さるプランを用意しており、今回もこれに助けられた。<br/>
このプランは驚くべきことに、現在は <strong>まだ</strong> 24時間といいつつ、 <strong>翌日の23:59まで</strong> 使い放題であるため、今回はイベント当日の朝にプランを購入して、翌日のアフターイベントから帰宅までを24時間（をオーバーしているが）の範囲でカバーすることができる。<br/>
（注：公式でもこの私用については <strong>当面の間は</strong> と表現しており、これが正規の仕様ではない。参考： <a href="https://povo.jp/spec/topping/24/">https://povo.jp/spec/topping/24/</a> ）</p>

<p>ちなみにカメラを忘れたので、ほぼ写真を取らず、ここにも画像は一切掲載されません。</p>

<h2>イベント当日</h2>

<p>前夜祭、当日とまあ魅力的なトークが多かった印象だった。<br/>
最初に書いたように自分は YAPC に対して Perl のカンファレンスというイメージを未だに持ってはいるものの、実際にはもっと広い範囲のテーマを許容していることは理解しており、そういう意味でも1日開催なのがもったいないくらいに様々なトークが用意されていたと思う。<br/>
（とはいえ、スケジュール調整の問題も体力の問題もあるので1日開催の方が個人的にはありがたいわけだが）</p>

<p>最初のトークセッションの一つである『コミュニティと共に生きる』は共感できる部分もあれば、それは生存バイアスというか幸運によって成り立っている部分もあるよな、と思ったりもしたけれど、今回の YAPC の参加者の半数以上は YAPC 初参加らしく、若い人たちには良い影響のある話かもなあ、と思ったりしました。<br/>
実際のところ、継続して同じコミュニティに居続けることに正解不正解なんてないと思うけれど、少なくともコミュニティって属しているだけじゃなくて、その中で自分が何かをやっていかないと意外と簡単に消滅してしまうので、そういった意味でも何かしらのコミュニティに積極的に関わっていく経験というのはしておいて損はないものだと思う。</p>

<p>個人的に最も印象に残っているのはパスキー認証の話で、今の自分の関心領域に近いこともあり、非常に興味深く楽しむことができた。また、ライブコーディングをしてくれたのも個人的には嬉しかった。<br/>
ただまあ、前提となる知識がそれなりに必要なジャンルではあるし、40分では物足りなかったかもしれない。</p>

<p>杜甫々さんのキーノートは、個人的には結構刺さったし、あれは刺さる人多かったと思う。<br/>
インターネットが普及していく中で、かなり初期の頃から変わらずコンテンツを育て続けている様子というのは、その裏側を意識すると圧倒的なものを感じてしまうけれど、こういったものも人の情熱や好み、そしてなにより継続する力によって支えられているんだなあ、というのをひしひしと感じました。<br/>
もちろん僕も WWW 入門にはお世話になりました。</p>

<p>LT は全体的に勢いがあって、「やっぱり LT はこうでなくちゃ」みたいな気持ちになった（けど実際のところそんなに LT はこうあるべき、みたいなのはないと思っている）。</p>

<p>他にも面白そうなトークいっぱいあって、枠被りで見れなかったものが多いので動画公開を楽しみにしています。</p>

<p>スポンサーブースは一通り回ろうと思ったが、1箇所での話が長くなってしまうことによって、結局全てのブースで話をするだけの時間がなくなってしまった。<br/>
コミュ力が皆無なので、話始めるのも難しいし、話を終えるのはもっと難しい。</p>

<p>懇親会では以前一緒に働いていた人の近況について色々聞けてとても懐かしい気持ちになった。<br/>
「◯◯さんも入社してもう8年目だけど〜」みたいなことを言われて「えっ」となったり。<br/>
（そんな昔でしたっけ……？　となって計算してみたらそんな昔でした）</p>

<p>イベント会場でのランチ等もそうだし懇親会もだけど、提供される食事の量が結構多そうで、非常に美味しいけどそんなにたくさんは食べられない……という気持ちにもなったり。<br/>
（そうはいっても食べようと思えば全然食べられたのだけど、美味しい食事はメインの目的ではなかったので、色んな人と話したりしていたら食事を摂る時間があまりとれなかった。それはそれでもったいないことをしたな、とも思う）</p>

<p>会場の椅子で宣伝されていた Perlbatross は非常に面白かったが、それに時間を割いてしまってはイベントに来た意味が薄れてしまうという感じだったので、現地ではほどほどにしてホテルに戻ってから楽しませてもらった。</p>

<h2>周辺イベント</h2>

<p>スポンサー企業が開催する懇親会的なイベントには参加しなかった。<br/>
これは体力的な問題に起因するもので、なるべくしっかり睡眠を取って、良い状態で YAPC に参加したかったからだ。<br/>
昔と比べて体力が衰えたというわけではなく、昔と比べて自分の体力への理解が深まったからとれた選択だと思う。
ただ、開催翌日の「オフラインだからできる話」はしっかり聴講してきた。こういう場所でしか話されないオフレコトークは総じて価値が高いと思っている。<br/>
残念ながら「オフラインだからできる話」なのでここにうっかり感想を書くこともはばかられるため、これ以上の言及は控える。</p>

<p>他の非公式なイベントには参加しなかったが、せっかく遠方まで来たのだからもう少し参加しても良かったかもしれない。</p>

<h2>振り返り</h2>

<p>前職の方と話す機会を得たり、過去の YAPC で親しくしていただいた方々と話せたりしたこともあり、同窓会的な意味でも十二分に楽しめたと思う。<br/>
遠方の（宿の確保が必要な距離での）カンファレンス参加自体は珍しいことではないが、業務外で自腹で、というのはとても久しぶりで、事前に懸念していたとおり、それなりの金額を使った。<br/>
今後も参加するためには、普段からこういうイベントのために予算を押さえておく必要がありそう。</p>

<p>しばらくオフラインのイベントから離れていたのだけど、今年に入ったあたりからまたそういうイベントに参加していこうという気持ちになっていたので、ちょうど良いタイミングで慣れ親しんだ（？） YAPC に参加できたのは非常にありがたかったです。</p>

<p>次回もあればなるべく（予算が許せば）参加したいと思っているので、今回の反省を活かせるようしっかり準備しておきたい。</p>
                        </div>
                    </div>
                
                    <div class="article">
                        <h1 class="title is-2"><a href="/entry/2024-01-14-creating-tool-for-getting-accesstoken.html">アクセストークンを得るためのツールを作っている</a></h1>
                        <div class="subtitle published">2024-01-14</div>
                        <div class="content">
                            <p>Web で開発していると、様々なサービスのアカウントでログインする機能を作ったりとかその他諸々、 OAuth2 や OIDC のお世話になることがある。<br/>
で、そういったものを利用するソフトウェアの開発に関わっていると、試しにリクエストを行うことも多々あるわけで、その度にアクセストークンを手動で取りに行くのって面倒だな、と思っていた。</p>

<p>実際に開発が終わってしまえば、使う分にはアクセストークンを意識することはないが、底に至るまでの間にアクセストークンがほしいなというシーンがあり、そういうときに簡単にアクセストークンを取得したいな、ということでコマンド一発でアクセストークンを取れるツールを作ってみた。</p>

<p><a href="https://github.com/risou/give-me-accesstoken">give-me-accesstoken</a></p>

<p>とはいっても、これはあまり汎用的に使えるものではないと思うし、とりあえず自分や自分の周囲の同じようなことをしている人が使えればいいかな、ということでサポートしている範囲は最小限です。</p>

<p>クライアント認証方式としては <code>client_secret_post</code> と <code>private_key_jwt</code> をサポートし、 <code>authorization code grant</code> と <code>client credentials grant</code> の2種類に対応している。</p>

<p><code>authorization code grant</code> の場合は普通、途中でブラウザに飛んでブラウザ上でログインをしてからツールに戻ってくるという手順になるので、そういった挙動には対応している。<br/>
ひとまず Google と GitHub では動作の確認をしている。<br/>
ただ、自分が使いたい対象の一つが、この手法では上手く動かないことがわかっており、どうも Cookie にセッション情報がないと認可リクエストを通せないようだったので、そのケースに対応している。<br/>
これはあまり正攻法ではないし、複数の問題を内包してしまう（パスワードを設定ファイルに直書きする必要があったり、 MFA に対応できなかったり）ため、これが使われることはあまり望んでいない。<br/>
（しかし自分が必要としているから対応しているので、当然自分は使う）</p>

<p>しばらくは自分で使ってみて、問題なさそうであれば自分の周囲の人たちに紹介してみようと思う。</p>
                        </div>
                    </div>
                
                    <div class="article">
                        <h1 class="title is-2"><a href="/entry/2023-09-12-try-using-arc.html">ブラウザを Arc に切り替えて何が変わったか</a></h1>
                        <div class="subtitle published">2023-09-12</div>
                        <div class="content">
                            <h2>Arc とはなにか</h2>

<p><a href="https://arc.net/">Arc from The Browser Company</a></p>

<p>Arc は2023年9月現在、 Mac OS や iOS に対応しているブラウザです。<br/>
Chromium エンジンを採用しているものの、見た目や使い方は大幅にカスタマイズされているため、ファーストインプレッションでは Chrome とは結構違うように思う方も多いのではないでしょうか。</p>

<p>Arc は2022年にベータ版としてリリースされ、 wait list に入っている人に順番に配布されてきました。<br/>
今年の7月25日にバージョン 1.0 として正式リリースされ、そのタイミングから誰でもダウンロードして使えるようになっています。</p>

<h2>Arc の特徴</h2>

<p>Arc はエンジンこそ Chromium を採用していますが、 Google Chrome などの同エンジンを採用しているブラウザとの違いもかなりあります。</p>

<h3>縦型タブを採用</h3>

<p>古来（？）、一部の Firefox や Chrome ユーザが拡張機能で実現してきた縦型タブが標準で採用されています。<br/>
現在のモニタは以前よりアスペクト比が高く横に長いものが多いため、縦型タブの方がスペースを有効活用できるケースが多そうです。</p>

<h3>ブックマークがない</h3>

<p>これは正確な表現ではなく、ブックマークに相当するものとして、 &ldquo;Favorites&rdquo; と &ldquo;Pinned&rdquo; があります。<br/>
&ldquo;Favorites&rdquo; はサイドバー上部にアイコンで表示され、同じプロファイルの全てのスペースに表示されるため、頻繁にアクセスするサイトを登録しておくと便利です。<br/>
対する &ldquo;Pinned&rdquo; は &ldquo;Favorites&rdquo; の下に表示され、タブ自体を閉じてもタブのリストに残り続けます。そして再びタブを選択するとそのサイトをロードしてくれます。<br/>
従来のブックマークに近いのは &ldquo;Pinned&rdquo; でしょうか。 &ldquo;Pinned&rdquo; にはフォルダも追加することができ、タブを分類して整理することも可能です。</p>

<h3>タブが自動的にアーカイブされる</h3>

<p>そして &ldquo;Pinned&rdquo; の下に通常のタブが表示されるのですが、これらは放っておくと勝手にアーカイブされます。<br/>
デフォルトでは12時間でアーカイブされる設定になっており、タブを開きすぎることを抑止してくれます。<br/>
タブがアーカイブされるまでの時間は12時間、24時間、7日間、30日間から選ぶことができます。<br/>
僕は自分の仕事におけるタブのライフサイクルに合う7日間を設定しています。<br/>
つまり1週間放置しているタブは勝手にアーカイブされるようにしています。<br/>
この設定だと、複数の調べごとをしているときなどタブが一時的に膨大な数になることはありますが、無限に放置されることはないため、気がつけば開いているタブが3桁を超えていた、という惨状を避けることができます。</p>

<h3>タブに自由に名前をつけられる</h3>

<p>通常は開いているページのタイトルが表示されているタブのラベルですが、リネームできます。<br/>
短期的に閉じられるタブでは特に使いませんが、 &ldquo;Pinned&rdquo; のタブでは非常に便利です。<br/>
（下の方で実際の使用例も記載しています）</p>

<h3>1ウィンドウで複数プロファイルを扱える</h3>

<p>Google Chrome を使っていたときは、個人用プロファイルと仕事用プロファイルを別で開いて使っており、複数の会社の仕事などしているとプロファイルが3つ以上になることもありました。<br/>
Chrome では異なるプロファイルで開いたタブを1つのウィンドウにまとめることはできないため、最低でもプロファイルの数だけウィンドウを開く必要がありました。<br/>
僕はタイル型ウィンドウマネージャを使っており、ウィンドウの数が増えると1つあたりのウィンドウの領域が狭くなっていくため、ウィンドウの数が増えることは僕にとって好ましくありませんでした。<br/>
Arc はスペースという概念を持っており、これがいわば従来のブラウザにおけるウィンドウみたいなものになるのですが、アプリケーションとしてのウィンドウは1つのままでどのスペースをアクティブにするかを選択することができます。<br/>
また、スペースごとにプロファイルを選択できるため、1つのウィンドウの中に全てのプロファイルをまとめることができます。<br/>
僕の場合は、普段は個人用プロファイルと仕事用プロファイルで1つずつスペースを用意しており、1つの仕事をちょっとペンディングして別の大掛かりな仕事に手を付けるときなどは仕事用プロファイルのスペースを追加する、という運用をしています。</p>

<h3>分割ビューに対応している</h3>

<p>Arc はなるべく1つのウィンドウで完結するように工夫されているのか、1ウィンドウの中で2つのページを開くことができます。<br/>
左右あるいは上下に分割して、片方のページを参照しながらもう片方のページで何かしらの操作をする、といったことが1つのウィンドウの中でできます。</p>

<h3>Chrome 拡張が利用できる</h3>

<p>先に書いたように Chromium エンジンを採用しており、 Google Chrome の偉大な資産である Chrome 拡張を使うことができます。<br/>
Chrome 拡張は Google Chrome の価値を高める存在であり、これを利用できることは新興ブラウザにとっては大幅なアドバンテージでしょう。<br/>
僕はプロファイルごとに Google アカウントでログインしているので、それぞれのプロファイルで Chrome を使っていたときにインストールしていた Chrome 拡張を引き継げました。</p>

<h2>個人的に便利に思っていること</h2>

<h3>一部のサイトはカーソルホバーで情報を閲覧、選択できる</h3>

<p>これはあまり対応しているサイトが多くないのでそこまで便利かというと、という気持ちもありますが対応しているサイトに関しては非常に便利なので紹介します。</p>

<p>たとえば Google Calendar を &ldquo;Favorites&rdquo; か &ldquo;Pinned&rdquo; に入れておくと、対象のアイコンもしくはタブにカーソルを合わせるだけで現在時刻から直後5時間程度の予定がバルーンで表示されます。</p>

<p>他には GitHub のプルリクエストのページを &ldquo;Favorites&rdquo; か &ldquo;Pinned&rdquo; に入れておくと、カーソルを合わせるだけで unread PRs の一覧をバルーンに出してくれます。<br/>
これは数が少々多くてもスクロールでき、なおかつ選択することでそのプルリクエストのページを開くことができます。</p>

<h3>&ldquo;Pinned&rdquo; のタブは閉じても残るため、何度もアクセスするページを登録しておくと便利</h3>

<p>僕の場合は仕事で関わっているリポジトリの Issue/PR の一覧ページを3つに分けて登録しています。</p>

<ul>
<li>my Issues: <a href="https://github.com/">https://github.com/</a>{org}/{repo}/issues/assigned/risou</li>
<li>my PRs: <a href="https://github.com/">https://github.com/</a>{org}/{repo}/pulls/risou</li>
<li>review tasks: <a href="https://github.com/">https://github.com/</a>{org}/{repo}/pulls?q=is%3Apr+is%3Aopen+user-review-requested%3A%40me</li>
</ul>


<p>これで自分が担当している Issue、自分の作った PR、自分のレビューを待っている PR を漏れなく確認することができます。<br/>
そしてこれらのタブにはそれぞれわかりやすいように <code>my Issues</code>, <code>my PRs</code>, <code>review tasks</code> というラベルをつけています。</p>

<h3>&ldquo;Favorites&rdquo; や &ldquo;Pinned&rdquo; に分割ビューをそのまま保存できる</h3>

<p>分割ビューは例えばマニュアルを見ながら操作をする、といったときなど使いどころの多い便利な機能ですが、 Arc はこの分割ビューをそのまま &ldquo;Favorites&rdquo; や &ldquo;Pinned&rdquo; に入れることができます。<br/>
つまり「マニュアルページ」「操作画面」を左右に並べた状態でブックマークができるようなものです。</p>

<h3>Note/Easel という独自機能がちょっとしたメモ代わりに便利</h3>

<p>いわばブラウザに備え付けられているテキストメモ機能とホワイトボード機能のようなものです。<br/>
Note は一時的なメモを残したり、文章を整えたりと非常に使い勝手が良いです。<br/>
Easel は Web ページを埋め込むことができます。複数の監視サービスのページを埋め込んでマイダッシュボードみたいなものを作ったりすることもできます。テキストや画像も入れることができるため、カスタマイズ性も十分です。</p>

<h3>Little Arc がちょっとした用途に便利</h3>

<p>Cmd+Option+N で開くことのできる Little Arc という一時的な別ウィンドウは、ここまで1つのウィンドウに全てを集約してきたが故の使い勝手の悪そうなイメージを払拭してくれると思います。<br/>
チャットツールに貼られたリンクをクリックする度に Arc に新しいタブが開かれることを望む人もいれば、そうでない人もいます。<br/>
Little Arc はちょっとページを開いて閲覧することはもちろん、そのまま Arc 本体にそのタブを開きたい場合にはボタン1つ（あるいはショートカット1つ）で Arc にマージすることができます。<br/>
また設定で Little Arc を経由せずに Arc で開くサイトを指定できたりする点も便利です。他のアプリケーションから開かれるページが全て Little Arc なのは逆に面倒だからです。</p>

<h2>個人的にここは微妙と思っていること</h2>

<h3>Cmd+Shift+T で復元されるタブが直前に閉じたものではないときがある</h3>

<p>閉じた直後にもう一度開きたい、となって Cmd+Shift+T を打つとしばらく前に閉じたタブが開かれたりする。<br/>
Archived Tabs を見に行けばあるのでそこから辿り着けるが、この挙動は復元されるタブが直感的にわからなくなってしまい不便。</p>

<h3>Ctrl+N で新しい Note が開いてしまう（デフォルトのキーマップの場合）</h3>

<p>キーマップを変更すれば良いだけではあるのですが、開いているページのテキストフォーム内でカーソルを下に移動するために Ctrl+N を押していると気づいたら New Note が &ldquo;Pinned&rdquo; に作られていたりします。<br/>
Mac OS の操作との重複なのでデフォルトで他のキーに割り当てられていてもいいのになあ、と思います。</p>

<h3>Note でコードブロックが表現できない</h3>

<p>Note は個人的には初期の Dropbox Paper のような使い勝手だと思っています。<br/>
見出しや太字・下線、リストなどに対応しているためちょっとしたドキュメントを作るのには便利です。<br/>
また、画像を差し込んだりリンクを設定することもできます。<br/>
一方で、テーブルやコードブロックを入れることはできません。<br/>
コードブロックとは言わないまでも、コードスニペットを貼り付けた際にその部分だけ等幅フォントに変えられると便利なのにな、と思っています。</p>

<h3>&ldquo;Pinned&rdquo; が肥大化しがち</h3>

<p>サイドバーには上から &ldquo;Favorites&rdquo; 、 &ldquo;Pinned&rdquo; 、そしてその他のタブという順に並んでいます。<br/>
タブが増えてくるとスクロールが発生しますが、 &ldquo;Favorites&rdquo; は常に最上部に残り続けます。<br/>
そのため &ldquo;Favorites&rdquo; は厳選しておくことが推奨されます。<br/>
&ldquo;Favorites&rdquo; が肥大化するとスクロールで表示される部分が狭くなってしまい、使いづらいためです。</p>

<p>そうするとブックマークしておきたいページのほとんどは &ldquo;Pinned&rdquo; に入ります。<br/>
&ldquo;Pinned&rdquo; はフォルダを置くこともできるのでうまく整理すればかなりの数を入れることはできます。<br/>
しかし Note や Easel は &ldquo;Favorites&rdquo; か &ldquo;Pinned&rdquo; にしか置けないため、ちょっとしたことで Note を作ったりしているとすぐに &ldquo;Pinned&rdquo; が肥大化します。<br/>
最終的にはその他のタブがスクロールしないと表示されない状態になり、これはあまり便利ではありません。<br/>
&ldquo;Pinned&rdquo; を整理しようにも、フォルダはフォルダで1つ分のスペースを使ってしまうので限界があります。
しかしまあ、これは使い方の問題もあるので Arc が良くない、という話ではないと思います。</p>

<h2>Arc を使って何が変わったか</h2>

<p>一番大きな変化としては、ブラウザウィンドウの乱立、タブの増殖が抑制されたことだと思います。</p>

<p>以前はブラウザが複数ウィンドウ、3桁以上のタブを開いている状態が常となっていました。<br/>
これが大幅に改善したことは非常に良い体験でした。<br/>
よくアクセスするページにはよりアクセスしやすくなりましたし、同じページを複数の異なるタブで開いてしまっているといったこともほぼなくなりました。</p>

<h2>紹介しなかった機能たち</h2>

<p>最後に、自分はあまり使っていない機能や使っているけど熱く語るほどではないものを箇条書きで列挙しておきます。<br/>
Arc は既に誰でもダウンロードできるようになっており、現在は Windows 版の開発が進んでいます（ Windows 版は wait list に登録できる状態になっています）。</p>

<ul>
<li>&ldquo;Pinned&rdquo; にあるフォルダにカーソルを合わせるとバルーンで中のリストを表示してくれる

<ul>
<li>さらにバルーン内で検索によって絞り込むことができる</li>
</ul>
</li>
<li>ブラウザ標準でスクリーンショットの機能を持っている</li>
<li>Boost 機能という、ページのカラーやフォントをカスタマイズする機能を持っている</li>
<li>Picture in Picture に対応している

<ul>
<li>Google Meet が対応しているので非常に助かっている</li>
</ul>
</li>
</ul>

                        </div>
                    </div>
                
                </article>
            </div>
        </section>
        <footer class="footer">
            <div class="content has-text-centered">
                Copyright &copy; 2019- risou All Rights Reserved.
            </div>
        </footer>
    </body>
</html>
