<!DOCTYPE html>
<html>
    <head>
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-29519043-1"></script>
        <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());
         gtag('config', 'UA-29519043-1');
        </script>
        
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
        <link rel="stylesheet" href="/static/main.css">
        
        <title>Yesod 使ってみて参考になったサイト | risou's Lithograph</title>
    </head>
    <body>
        <section class="hero is-medium is-bold is-dark">
            <div class="hero-body">
                <div class="container has-text-centered">
                    <h1 class="title is-1">risou's Lithograph</h1>
                </div>
            </div>
        </section>
        <section class="section">
            <div class="container">
                <nav class="level is-mobile">
                    <div class="level-left"></div>
                    <div class="level-right">
                        <p class="level-item"><a href="/">top</a></p>
                        <p class="level-item"><a href="/list.html">list</a></p>
                    </div>
                </nav>
                <article class="articles">
                    <div class="article">
                        <h1 class="title is-2">Yesod 使ってみて参考になったサイト</h1>
                        <div class="subtitle published">2013-09-10</div>
                        <div class="content">
                            <p>自分用メモ的な位置づけ。</p>

<h3>Yesodをnginxで動かすときのnginx.conf</h3>

<p><a href="http://qiita.com/suztomo/items/ecaaa402e555a416afe7">http://qiita.com/suztomo/items/ecaaa402e555a416afe7</a></p>

<p>できれば直接80番をYesodアプリに割り当てて、nginxでそれ以外をコントロール、という形にしたかったけど、
やり方わからなかったので、別ポートを指定して proxy_pass で処理した。</p>

<h3>プロダクション向けのビルド</h3>

<p><a href="http://d.hatena.ne.jp/thimura/20111117/1321480728">http://d.hatena.ne.jp/thimura/20111117/1321480728</a></p>

<pre><code>$ yesod build
</code></pre>

<p>でできるのかと思いきや、それとこれとは全く別のようで。</p>

<pre><code>$ cabal configure -fproduction
$ cabal build
</code></pre>

<p>が正解らしい。このあたりちゃんと押さえられていないの良くないですね。</p>

<h3>プロダクションモードでの実行</h3>

<p>これはどこかのサイトを参考にしたわけではないけど、ついでに。</p>

<p>deploy/Procfile を読んだら末尾に書いてあったのを参考に、実行時にポートの指定をしないなら、</p>

<pre><code>$ ./dist/build/{$app}/{$app} production
</code></pre>

<p>で良いっぽい。</p>
                        </div>
                        <div class="subtitle published">2013-09-10 01:08:39.849838 JST</div>
                    </div>
                </article>
            </div>
        </section>
        <footer class="footer">
            <div class="content has-text-centered">
                Copyright &copy; 2019- risou All Rights Reserved.
            </div>
        </footer>
    </body>
</html>
