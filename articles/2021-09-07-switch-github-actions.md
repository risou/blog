title: ブログの CI build を Travis CI から GitHub Actions に移行した
date: 2021-09-07
datetime: 2021-09-07T02:24:15.149284+09:00
---

以前このブログに書いたけど、このブログは自作の静的サイトジェネレータ "Lithograph" を使っている。  
Lithograph は GitHub Pages に対応しており、 `.travis.yml` を設定することで Travis CI 上で markdown から HTML を生成していた。

今回、この仕組みを Travis CI から GitHub Actions に移行した。  
といっても移行対応のほとんどは8ヶ月ほど前に進めており、今回は残作業を完了したということになる。

Lithograph は Raku で書かれたアプリケーションであり、 Travis CI を採用していたのもこれに依るものが大きかった。当時、 Travis CI は Perl 6 （現在の Raku ）に対応していたのだ。  
しかし、そもそも GitHub Pages を想定したアプリケーションだったこともあり、記事をビルドする仕組みも GitHub Actions に対応する方がコンパクトにまとまると考えた。

Travis CI から GitHub Actions への移行は難しくなく、 Raku のビルド環境を用意して Lithograph が提供するコマンドを実行するシェルファイルを実行すれば良かった。  
Slack への通知も公開されている Action があり、それを使うだけだったのであまり時間をかけずに済んだ。

そして最後に、もうひとつのチャレンジとして今現在、この記事を "github.dev" で書いている。  
ここで書いて、 Github Actions でビルドされ、ブログが更新されれば、 Git の実行環境がないマシンからでもブラウザひとつで記事を書くことができる。  
ここまでできれば、静的サイトジェネレータとして僕が求めていた最低限の機能は揃ったと言えそうだ。  
必要な機能のほとんどを GitHub に依存していることだけは好ましくないが、 GitHub が失われたとしてもエディタと Git とシェルスクリプトの実行環境があれば Lithograph は利用可能なので、ひとまずはこれで良いと思っている。  
今後も時間を見つけて、少しずつ改善していければと思う。